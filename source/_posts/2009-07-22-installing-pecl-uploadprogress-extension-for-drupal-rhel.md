---
layout: post
title: Installing PECL uploadprogress Extension for Drupal (RHEL)
date: 2009-07-22 00:54:00.000000000 +08:00
type: post
published: true
status: publish
categories:
- Tech Note
tags: []
meta:
  blogger_ca678228220bc856f5131874f02e04d9_permalink: '2352095757977144219'
  blogger_author: mingster
  blogger_blog: mingstert.blogspot.com
  _edit_last: '40718'
  _wpas_skip_yup: '1'
  _wpas_skip_twitter: '1'
  blogger_permalink: "/2009/07/installing-pecl-uploadprogress.html"
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1456052205;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:256;}i:1;a:1:{s:2:"id";i:177;}i:2;a:1:{s:2:"id";i:167;}}}}
  original_post_id: '175'
  _wp_old_slug: '175'
author: mingster
---
<p>The PECL uploadprogress modules allows a user to see a upload progress bar.<br />This is a great UI that makes uploading in action and hence good user experience.</p>
<p>To intall uploadprogress module:</p>
<p>1. install php development, pecl, pear, and development tools if you not yet have them installed:<br /><code><br />yum -y install php-devel php-pecl php-pear<br />yum -y groupinstall "Development Tools"<br /></code><br />2. install the upload progress:<br /><code><br />pecl install uploadprogress<br /></code><br />This is what you should get:<br /><code><br />[root@xxx]# pecl install uploadprogress<br />downloading uploadprogress-1.0.1.tgz ...<br />Starting to download uploadprogress-1.0.1.tgz (8,536 bytes)<br />.....done: 8,536 bytes<br />4 source files, building<br />running: phpize<br />Configuring for:<br />PHP Api Version:         20041225<br />Zend Module Api No:      20060613<br />Zend Extension Api No:   220060519<br />building in /var/tmp/pear-build-root/uploadprogress-1.0.1<br />running: /var/tmp/uploadprogress/configure<br />checking for egrep... grep -E<br />checking for a sed that does not truncate output... /bin/sed<br />checking for cc... cc<br />checking for C compiler default output file name... a.out<br />checking whether the C compiler works... yes<br />checking whether we are cross compiling... no<br />checking for suffix of executables...<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether cc accepts -g... yes<br />checking for cc option to accept ANSI C... none needed<br />checking how to run the C preprocessor... cc -E<br />checking for icc... no<br />checking for suncc... no<br />checking whether cc understands -c and -o together... yes<br />checking for system library directory... lib<br />checking if compiler supports -R... no<br />checking if compiler supports -Wl,-rpath,... yes<br />checking build system type... i686-redhat-linux-gnu<br />checking host system type... i686-redhat-linux-gnu<br />checking target system type... i686-redhat-linux-gnu<br />checking for PHP prefix... /usr<br />checking for PHP includes... -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib<br />checking for PHP extension directory... /usr/lib/php/modules<br />checking for PHP installed headers prefix... /usr/include/php<br />checking if debug is enabled... no<br />checking if zts is enabled... no<br />checking for re2c... no<br />configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.<br />checking for gawk... gawk<br />checking whether to enable uploadprogress functions... yes, shared<br />checking for ld used by cc... /usr/bin/ld<br />checking if the linker (/usr/bin/ld) is GNU ld... yes<br />checking for /usr/bin/ld option to reload object files... -r<br />checking for BSD-compatible nm... /usr/bin/nm -B<br />checking whether ln -s works... yes<br />checking how to recognise dependent libraries... pass_all<br />checking for ANSI C header files... yes<br />checking for sys/types.h... yes<br />checking for sys/stat.h... yes<br />checking for stdlib.h... yes<br />checking for string.h... yes<br />checking for memory.h... yes<br />checking for strings.h... yes<br />checking for inttypes.h... yes<br />checking for stdint.h... yes<br />checking for unistd.h... yes<br />checking dlfcn.h usability... yes<br />checking dlfcn.h presence... yes<br />checking for dlfcn.h... yes<br />checking for g77... no<br />checking for f77... no<br />checking for xlf... no<br />checking for frt... no<br />checking for pgf77... no<br />checking for fort77... no<br />checking for fl32... no<br />checking for af77... no<br />checking for f90... no<br />checking for xlf90... no<br />checking for pgf90... no<br />checking for epcf90... no<br />checking for f95... f95<br />checking whether we are using the GNU Fortran 77 compiler... yes<br />checking whether f95 accepts -g... yes<br />checking the maximum length of command line arguments... 32768<br />checking command to parse /usr/bin/nm -B output from cc object... ok<br />checking for objdir... .libs<br />checking for ar... ar<br />checking for ranlib... ranlib<br />checking for strip... strip<br />checking if cc supports -fno-rtti -fno-exceptions... no<br />checking for cc option to produce PIC... -fPIC<br />checking if cc PIC flag -fPIC works... yes<br />checking if cc static flag -static works... yes<br />checking if cc supports -c -o file.o... yes<br />checking whether the cc linker (/usr/bin/ld) supports shared libraries... yes<br />checking whether -lc should be explicitly linked in... no<br />checking dynamic linker characteristics... GNU/Linux ld.so<br />checking how to hardcode library paths into programs... immediate<br />checking whether stripping libraries is possible... yes<br />checking if libtool supports shared libraries... yes<br />checking whether to build shared libraries... yes<br />checking whether to build static libraries... no<br />configure: creating libtool<br />appending configuration tag "CXX" to libtool<br />appending configuration tag "F77" to libtool<br />checking if libtool supports shared libraries... yes<br />checking whether to build shared libraries... yes<br />checking whether to build static libraries... no<br />checking for f95 option to produce PIC... -fPIC<br />checking if f95 PIC flag -fPIC works... yes<br />checking if f95 static flag -static works... yes<br />checking if f95 supports -c -o file.o... yes<br />checking whether the f95 linker (/usr/bin/ld) supports shared libraries... yes<br />checking dynamic linker characteristics... GNU/Linux ld.so<br />checking how to hardcode library paths into programs... immediate<br />configure: creating ./config.status<br />config.status: creating config.h<br />running: make<br />/bin/sh /var/tmp/pear-build-root/uploadprogress-1.0.1/libtool --mode=compile cc  -I. -I/var/tmp/uploadprogress -DPHP_ATOM_INC -I/var/tmp/pear-build-root/uploadprogress-1.0.1/include -I/var/tmp/pear-build-root/uploadprogress-1.0.1/main -I/var/tmp/uploadprogress -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2   -c /var/tmp/uploadprogress/uploadprogress.c -o uploadprogress.lo<br />mkdir .libs<br />cc -I. -I/var/tmp/uploadprogress -DPHP_ATOM_INC -I/var/tmp/pear-build-root/uploadprogress-1.0.1/include -I/var/tmp/pear-build-root/uploadprogress-1.0.1/main -I/var/tmp/uploadprogress -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /var/tmp/uploadprogress/uploadprogress.c  -fPIC -DPIC -o .libs/uploadprogress.o<br />/bin/sh /var/tmp/pear-build-root/uploadprogress-1.0.1/libtool --mode=link cc -DPHP_ATOM_INC -I/var/tmp/pear-build-root/uploadprogress-1.0.1/include -I/var/tmp/pear-build-root/uploadprogress-1.0.1/main -I/var/tmp/uploadprogress -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2   -o uploadprogress.la -export-dynamic -avoid-version -prefer-pic -module -rpath /var/tmp/pear-build-root/uploadprogress-1.0.1/modules  uploadprogress.lo<br />cc -shared  .libs/uploadprogress.o   -Wl,-soname -Wl,uploadprogress.so -o .libs/uploadprogress.so<br />creating uploadprogress.la<br />(cd .libs &amp;&amp; rm -f uploadprogress.la &amp;&amp; ln -s ../uploadprogress.la uploadprogress.la)<br />/bin/sh /var/tmp/pear-build-root/uploadprogress-1.0.1/libtool --mode=install cp ./uploadprogress.la /var/tmp/pear-build-root/uploadprogress-1.0.1/modules<br />cp ./.libs/uploadprogress.so /var/tmp/pear-build-root/uploadprogress-1.0.1/modules/uploadprogress.so<br />cp ./.libs/uploadprogress.lai /var/tmp/pear-build-root/uploadprogress-1.0.1/modules/uploadprogress.la<br />PATH="$PATH:/sbin" ldconfig -n /var/tmp/pear-build-root/uploadprogress-1.0.1/modules<br />----------------------------------------------------------------------<br />Libraries have been installed in:<br />  /var/tmp/pear-build-root/uploadprogress-1.0.1/modules</p>
<p>If you ever happen to want to link against installed libraries<br />in a given directory, LIBDIR, you must either use libtool, and<br />specify the full pathname of the library, or use the `-LLIBDIR'<br />flag during linking and do at least one of the following:<br />  - add LIBDIR to the `LD_LIBRARY_PATH' environment variable<br />    during execution<br />  - add LIBDIR to the `LD_RUN_PATH' environment variable<br />    during linking<br />  - use the `-Wl,--rpath -Wl,LIBDIR' linker flag<br />  - have your system administrator add LIBDIR to `/etc/ld.so.conf'</p>
<p>See any operating system documentation about shared libraries for<br />more information, such as the ld(1) and ld.so(8) manual pages.<br />----------------------------------------------------------------------</p>
<p>Build complete.<br />Don't forget to run 'make test'.</p>
<p>running: make INSTALL_ROOT="/var/tmp/pear-build-root/install-uploadprogress-1.0.1" install<br />Installing shared extensions:     /var/tmp/pear-build-root/install-uploadprogress-1.0.1/usr/lib/php/modules/<br />running: find "/var/tmp/pear-build-root/install-uploadprogress-1.0.1" | xargs ls -dils<br />27529277  4 drwxr-xr-x 3 root root  4096 Jul 22 00:48 /var/tmp/pear-build-root/install-uploadprogress-1.0.1<br />27529298  4 drwxr-xr-x 3 root root  4096 Jul 22 00:48 /var/tmp/pear-build-root/install-uploadprogress-1.0.1/usr<br />27529299  4 drwxr-xr-x 3 root root  4096 Jul 22 00:48 /var/tmp/pear-build-root/install-uploadprogress-1.0.1/usr/lib<br />27529300  4 drwxr-xr-x 3 root root  4096 Jul 22 00:48 /var/tmp/pear-build-root/install-uploadprogress-1.0.1/usr/lib/php<br />27529301  4 drwxr-xr-x 2 root root  4096 Jul 22 00:48 /var/tmp/pear-build-root/install-uploadprogress-1.0.1/usr/lib/php/modules<br />27529297 44 -rwxr-xr-x 1 root root 43639 Jul 22 00:48 /var/tmp/pear-build-root/install-uploadprogress-1.0.1/usr/lib/php/modules/uploadprogress.so</p>
<p>Build process completed successfully<br />Installing '/usr/lib/php/modules/uploadprogress.so'<br />install ok: channel://pecl.php.net/uploadprogress-1.0.1<br />configuration option "php_ini" is not set to php.ini location<br />You should add "extension=uploadprogress.so" to php.ini<br /></code><br />3. add the extension to php.ini:<br /><code><br />extension=uploadprogress.so<br /></code><br />4. restart apache for the changes to take effect.<br /><code><br />service httpd restart<br /></code></p>
