

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="mingster">
  <meta name="keywords" content="">
  
    <meta name="description" content="http:&#x2F;&#x2F;www.pluralsight.com&#x2F;wiki&#x2F;default.aspx&#x2F;Keith.GuideBook.WhatIsAPermission  Throughout my discussions of access control and ACLs in this book, I will often talk about permissions as numbers. For e">
<meta property="og:type" content="article">
<meta property="og:title" content="What Is A Permission, by Keith Brown">
<meta property="og:url" content="http://example.com/2006/04/11/what-is-a-permission-by-keith-brown/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="http:&#x2F;&#x2F;www.pluralsight.com&#x2F;wiki&#x2F;default.aspx&#x2F;Keith.GuideBook.WhatIsAPermission  Throughout my discussions of access control and ACLs in this book, I will often talk about permissions as numbers. For e">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2006-04-10T20:44:00.000Z">
<meta property="article:modified_time" content="2020-06-16T03:31:12.778Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="development">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>What Is A Permission, by Keith Brown - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>mingster.com</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="What Is A Permission, by Keith Brown"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2006-04-11 04:44" pubdate>
          April 11, 2006 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          264 words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          3 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">What Is A Permission, by Keith Brown</h1>
            
            
              <div class="markdown-body">
                
                <p><a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook.WhatIsAPermission">http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook.WhatIsAPermission</a></p>
<p>
<p>Throughout my discussions of access control and ACLs in this book, I will often talk about permissions as numbers. For example, I might talk about <code>0x1FF</code> as being a set of permissions, or granting "permission 1 and 2" to someone. What I'm doing is being very generic and using literal access masks or numbered permissions. I'm not specifying just what types of objects I'm talking about; I'm just talking about how access control works for all different types of objects.</p>
<p>
<p>So let's make this concrete and look at some examples of permissions for some specific types of objects in Windows. Let's start with, oh, a registry key. Peeking at a Win32 header file called <code>winnt.h</code> shows us the following<sup>1</sup>:</p>
<pre> // excerpt from winnt.h<br /> #define KEY_QUERY_VALUE         (0x00000001)<br /> #define KEY_SET_VALUE           (0x00000002)<br /> #define KEY_CREATE_SUB_KEY      (0x00000004)<br /> #define KEY_ENUMERATE_SUB_KEYS  (0x00000008)<br /> #define KEY_NOTIFY              (0x00000010)<br /> #define KEY_CREATE_LINK         (0x00000020)<br /></pre>
<p>
<p>Let's also look at the permission definitions for a thread:</p>
<pre> // excerpt from winnt.h<br /> #define THREAD_TERMINATE               (0x00000001)  <br /> #define THREAD_SUSPEND_RESUME          (0x00000002)  <br /> #define THREAD_GET_CONTEXT             (0x00000008)  <br /> #define THREAD_SET_CONTEXT             (0x00000010)  <br /> #define THREAD_SET_INFORMATION         (0x00000020)  <br /> #define THREAD_QUERY_INFORMATION       (0x00000040)  <br /> #define THREAD_SET_THREAD_TOKEN        (0x00000080)<br /> #define THREAD_IMPERSONATE             (0x00000100)<br /> #define THREAD_DIRECT_IMPERSONATION    (0x00000200)<br /></pre>
<p>
<p>If you wanted to grant <code>Alice</code> permission to create a new registry key under some existing key, you'd edit the existing key's DACL and add an ACE ( <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsAnAccessControlList.html">What Is An Access Control List</a> ) that grants <code>Alice</code> the KEY_CREATE_SUB_KEY permission. Pretty simple. But look at those permissions again and tell me how you'd grant Alice the permission to delete the key she just created!</p>
<p>
<p>That's right, the registry subsystem doesn't bother defining a permission for deleting a key. That's because it's such a common permission (most secure objects can be deleted) that it's included as part of a standard set of permissions that are common across all types of objects. Here are the standard permissions that are allowed to be put in an ACL:</p>
<pre> // excerpt from winnt.h<br /> #define DELETE           (0x00010000L)<br /> #define READ_CONTROL     (0x00020000L)<br /> #define WRITE_DAC        (0x00040000L)<br /> #define WRITE_OWNER      (0x00080000L)<br /> #define SYNCHRONIZE      (0x00100000L)<br /></pre>
<p>
<p>Compare the numerical layout of the standard permissions to the specific permissions defined for registry keys. Note how the standard permissions all fall in the upper word of the 32 bit mask, while the specific permissions are defined in the lower word. Notice the same technique is used for the thread permissions. You see, each class of object is allowed to define up to 16 specific permissions, and they must all be in that lower word, so they don't conflict with permissions Microsoft has already defined for all objects, such as the standard permissions shown above.</p>
<p>
<p>The standard permissions are really quite straightforward. Let me briefly explain what they mean. <code>READ_CONTROL</code> ("Read Permissions") controls whether you can read the owner and DACL in the object's security descriptor. If you don't have this permission, you're not even allowed to see what permissions you do have! <code>WRITE_DAC</code> ("Write Permissions") and <code>WRITE_OWNER</code> ("Take Ownership") say whether you're allowed to change the object's DACL or take ownership of the object by changing the owner SID to be your own SID (for more detail, see <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsOwnership.html">What Is Ownership</a> ). <code>SYNCHRONIZE</code> says whether you can wait on an object (this is most often used with synchronization objects such as a mutex or semaphore). By limiting SYNCHRONIZE access, you can prevent an untrusted user from grabbing a mutex that your program depends on and deadlocking you. And <code>DELETE</code> is pretty obvious.</p>
<p>
<p>Let's say you want to grant <code>Alice</code> permission to read a registry key. It'd make sense to grant her a combination of the following: </p>
<p>
<ul>
<li>KEY_QUERY_VALUE </li>
<li>KEY_ENUMERATE_SUB_KEYS </li>
<li>KEY_NOTIFY </li>
<li>READ_CONTROL </li>
</ul>
<p>
<p>If you binary OR these values together, you'll end up with <code>0x00020019</code>. This would be the access mask you'd put into the ACE ( <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsAnAccessControlList.html">What Is An Access Control List</a> ) to grant <code>Alice</code> read access to the key. For an example of code that modifies an ACL programmatically, check out <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/HowToProgramACLs.html">How To Program ACLs</a> .</p>
<p>
<p>Look at the following access mask and try to figure out what it means: <code>0x00130000</code>. The answer is in the following footnote<sup>2</sup>. Now try to decode this one: <code>0x00000001</code>. Surely this one is easier! Oh wait, I didn't tell you what type of object we're talking about. I mean, if it were a registry key, this would be <code>KEY_QUERY_VALUE</code> -a fairly benign permission to grant, at least compared to <code>THREAD_TERMINATE</code>! You see, given a random permission mask, you really can't tell what it means unless you know the type of object to which it applies, unless it simply consists of standard permissions, which are defined centrally for all objects.</p>
<p>
<p>With this in mind, think about a permission mask that would be generic enough to grant read permission to any type of object in the system, including registry keys and threads. For a registry key, we'd want <code>0x00020019</code>, as we calculated earlier for <code>Alice</code>. But for a thread, it'd be <code>0x00020048</code>. That's a very different mask. As you can see, because no two types of objects can be expected to have the same sorts of permissions, at first glance it'd be impossible to treat objects polymorphically with respect to permissions. But if you look a bit further into <code><strong>winnt.h</strong></code>, you'll find the following rather interesting definitions:</p>
<pre> // excerpt from winnt.h<br /> #define GENERIC_READ      (0x80000000L)<br /> #define GENERIC_WRITE     (0x40000000L)<br /> #define GENERIC_EXECUTE   (0x20000000L)<br /> #define GENERIC_ALL       (0x10000000L)<br /></pre>
<p>
<p>What do you think would happen if you added an ACE to a registry key's DACL that granted <code>Alice</code> <code>GENERIC_READ</code>? Think about it for a moment. If you guessed that the system would convert the access mask from <code>0x80000000</code> to <code>0x00020019</code> before storing the new DACL in the metadata for the registry key, then you'd be correct. You see, each class of object in Windows defines a mapping from these four generic permissions onto standard and specific permissions. This allows us to make statements like, "By default, I'd like to grant full control to <code>SYSTEM</code> and myself for any object I create. Oh and I'd also like <code>Alice</code> to have read access as well." Here's a text representation of just such a DACL:</p>
<pre> grant SYSTEM 0x10000000<br /> grant Keith  0x10000000<br /> grant Alice  0x80000000<br /></pre>
<p>
<p>It turns out that Windows makes a statement like this for every process! You see, inside the token ( <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsAToken.html">What Is A Token</a> ) is a default owner and DACL that are used whenever you create new objects<sup>3</sup>. For example, if you were to create a thread, how would the system know what the DACL for that thread should look like? Well, it looks at this default DACL that's tucked away inside your token.</p>
<p>
<p>Here's what a default DACL would look like for me on my laptop<sup>4</sup>:</p>
<pre> grant SYSTEM 0x10000000<br /> grant Keith  0x10000000<br /></pre>
<p>
<p>So by default, any new threads that I create, or semaphores, shared memory sections and so on, start life with DACLs that specifically grant my account and <code>SYSTEM</code> full control. Nobody else will be able to touch the objects I create, barring specially privileged users such as administrators ( <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsAPrivilege.html">What Is A Privilege</a> ). Note that hierarchical systems like the file system and registry instead use ACL inheritance to come up with a default DACL; this ensures that permissions remain consistent through the branches of the hierarchy. See <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsACLInheritance.html">What Is ACL Inheritance</a> for the details.</p>
<p>
<p>The default DACL is one of the few mutable bits of data in a token. In most cases you shouldn't ever need to change this DACL, as it's already about as tightly secured as it can be. If you ever find the need to adjust it, you'll want to look at the Win32 function <code>SetTokenInformation</code>.</p>
<p>
<div class="Rule"></div>
<p>
<ol>
<li>I've omitted three permissions that are specific to 64-bit Windows for brevity. </li>
<li><code>DELETE</code>, <code>READ_CONTROL</code>, and <code>SYNCHRONIZE</code>. </li>
<li>By "objects" I mean any object that has a security descriptor ( <a target="_blank" rel="noopener" href="http://www.pluralsight.com/wiki/default.aspx/Keith.GuideBook/WhatIsASecurityDescriptor.html">What Is A Security Descriptor</a> ), such as a process, thread, mutex, etc. </li>
<li>If you want to do this experiment, you should download the Token Dump component from my website. I don't know of any built-in tool that shows this information. </li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/dev/" class="category-chain-item">dev</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/development/" class="print-no-link">#development</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>What Is A Permission, by Keith Brown</div>
      <div>http://example.com/2006/04/11/what-is-a-permission-by-keith-brown/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>mingster</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>April 11, 2006</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2006/04/25/2006425-%E3%80%8A%E6%96%B0%E8%81%9E%E5%81%B4%E5%AF%AB%E3%80%8B%E8%A8%B1%E5%8B%9D%E9%9B%84%E3%80%81%E9%99%B3%E6%B0%B8%E6%B3%B0-%E5%A5%BD%E7%AE%87%E6%82%A3%E9%9B%A3%E7%9C%9F%E6%83%85/" title="2006/4/25 《新聞側寫》許勝雄、陳永泰 好箇患難真情">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">2006/4/25 《新聞側寫》許勝雄、陳永泰 好箇患難真情</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2006/04/06/%E7%BE%8E%E5%9C%8B%E5%AF%8C%E8%B1%AA%E5%94%90%E7%B4%8D%E5%B7%9D%E6%99%AE%E4%B8%80%E6%89%8B%E7%AD%96%E5%8A%83%E7%86%B1%E9%96%80%E7%9A%84%E7%9C%9F%E4%BA%BA%E5%AF%A6%E5%A2%83%E7%A7%80-apprentice/" title="美國富豪唐納川普一手策劃熱門的真人實境秀 - Apprentice (誰是接班人)">
                        <span class="hidden-mobile">美國富豪唐納川普一手策劃熱門的真人實境秀 - Apprentice (誰是接班人)</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
